<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
  <link rel="stylesheet" type="text/css" href="css/register.css"/>
  <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
  <script>
     function regist() {
       var check
       var checks = document.getElementsByName("type");
       for (var i = 0; i < checks.length; i++) {
         var current = checks[i];
         if (current.checked) {
           check = current.value
         }
         check = parseInt(check)
       }
       var username = document.getElementById("username").value;
       var password = document.getElementById("password").value;
       var phoneNumber = document.getElementById("tel").value;
       var university = document.getElementById("university").value;
       var major = document.getElementById("major").value;
       var postData = {
         username : document.getElementById("username").value,
         password : document.getElementById("password").value,
         check : document.getElementById("type").value,
         phoneNumber : document.getElementById("tel").value,
         university : document.getElementById("university").value,
         major : document.getElementById("major").value
       };
       $.ajax({
         type: "POST",
         dataType: "json",
         url: 'http://101.34.159.82:8000/register',
         contentType: "application/json",
         data:JSON.stringify({
           "username": username,
           "password": password,
           "identity": check,
           "phoneNumber": phoneNumber,
           "university": university,
           "major": major
         }),
         success: function (result) {
           console.log("data is :" + result)
           if (result.code == 0) {
             alert("注册成功");
           }else {
             alert(result.message)
           }
         }
       });
    }
  </script>

</head>
<body>
<div class="rg_layout">
  <div class="rg_left">
    <p>新用户注册</p>
    <p>USER REGISTER</p>
  </div>
  <div class="rg_center">
    <div class="rg_form">
        <table>
          <tr>
            <td class="td_left"><label for="username">用户名</label></td>
            <td class="td_right"><input type="text" name="username" id="username" placeholder="请输入用户名"></td>
          </tr>
          <tr>
            <td class="td_left"><label for="password">密码</label></td>
            <td class="td_right"><input type="password" name="password" id="password" placeholder="请输入密码"></td>
          </tr>
          <tr>
            <td class="td_left"><label for="check">密码确认</label></td>
            <td class="td_right"><input type="password" name="check" id="check" placeholder="请确认密码"></td>
          </tr>
          <tr>
            <td class="td_left"><label for="tel">手机号</label></td>
            <td class="td_right"><input type="text" name="tel" id="tel" placeholder="请输入手机号"></td>
          </tr>
          <tr>
            <td class="td_left"><label>注册类型</label></td>
            <td class="td_right"><input type="radio" name="type" value= 1 id="type">教师
              <input type="radio" name="type" value= 0 id="type">学生</td>
          </tr>
          <tr>
            <td class="td_left"><label for="university">学校</label></td>
            <td class="td_right"><input type="text" name="university" id="university" placeholder="请输入学校"></td>
          </tr>
          <tr>
            <td class="td_left"><label for="major">学校</label></td>
            <td class="td_right"><input type="text" name="major" id="major" placeholder="请输入专业"></td>
          </tr>
          <tr>
            <td colspan="2" align="center"><input type="button" id="btn_sub" value="注册" onClick="regist()"></td>
          </tr>
        </table>
    </div>
  </div>
  <div class="rg_right">
    <p>已有账号?<a href="./login.html">立即登录</a></p>
  </div>

</div>

</body>
</html>
